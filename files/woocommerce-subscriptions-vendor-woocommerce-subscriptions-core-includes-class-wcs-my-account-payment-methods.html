<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>WooCommerce Code Reference</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/favicon.png" />
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-touch-icon-114x114.png"/>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/base.css?updated=1663738776">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/template.css?updated=1663738776">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
            <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/js/all.min.js" integrity="sha256-0vuk8LXoyrmCjp1f0O300qo1M75ZQyhH9X3J6d+scmk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8KCYZ2CYMS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8KCYZ2CYMS', {
		'content_group' : 'WooCommerce Core Code Reference',
	});
</script>
        <script src="../js/prism.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new HashChangeEvent('hashchange'));
        });
    </script>
</head>
<body id="top">
    <header class="phpdocumentor-top-header">
    <section class="phpdocumentor-section">
        <div class="site-branding">
            <a class="site-logo" href="../index.html"><img width="180" src="../images/logo.svg" alt="WooCommerce" /></a>
        </div>
        <nav class="main-navigation">
            <ul>
                <li><a href="../hooks/hooks.html">Hooks Reference</a></li>
                <li><a href="https://docs.woocommerce.com/">Documentation</a></li>
                <li><a href="https://woocommerce.github.io/woocommerce-rest-api-docs/">REST API Docs</a></li>
                <li><a href="https://woocommerce.com/careers/?utm_source=woocommerce+core+code+reference&utm_medium=devdocs&utm_campaign=woo+careers" target="_blank">We're hiring!</a></li>
            </ul>
        </nav>
    </section>
</header>

<div class="phpdocumentor-header">
    <section class="phpdocumentor-section">
        <h1 class="phpdocumentor-title">WooCommerce Code Reference</h1>
        <section class="phpdocumentor-search">
    <label class="phpdocumentor-label">
        <span class="visually-hidden">Search (click ESC to close search results)</span>
        <input id="autoComplete" tabindex="1" type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading..." disabled />
    </label>
</section>

    </section>
</div>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <aside class="phpdocumentor-column -four phpdocumentor-sidebar">
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
            </section>

        <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                    <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerceSubscriptionsAdmin.html"><abbr title="\WooCommerceSubscriptionsAdmin">WooCommerceSubscriptionsAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerceSubscriptionsClasses.html"><abbr title="\WooCommerceSubscriptionsClasses">WooCommerceSubscriptionsClasses</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerceSubscriptions.html"><abbr title="\WooCommerceSubscriptions">WooCommerceSubscriptions</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/WooCommerceSubscriptions-WC.html"><abbr title="\WooCommerceSubscriptions\WC">WC</abbr></a></li>
                                    <li><a href="../packages/WooCommerceSubscriptions-RestApi.html"><abbr title="\WooCommerceSubscriptions\RestApi">RestApi</abbr></a></li>
                                    <li><a href="../packages/WooCommerceSubscriptions-WCS.html"><abbr title="\WooCommerceSubscriptions\WCS">WCS</abbr></a></li>
                                    <li><a href="../packages/WooCommerceSubscriptions-GatewaysPayPal.html"><abbr title="\WooCommerceSubscriptions\GatewaysPayPal">GatewaysPayPal</abbr></a></li>
                                    <li><a href="../packages/WooCommerceSubscriptions-Privacy.html"><abbr title="\WooCommerceSubscriptions\Privacy">Privacy</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerce.html"><abbr title="\WooCommerce">WooCommerce</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/WooCommerce-SubscriptionsAPI.html"><abbr title="\WooCommerce\SubscriptionsAPI">SubscriptionsAPI</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-SubscriptionsIncludesEmails.html"><abbr title="\WooCommerce\SubscriptionsIncludesEmails">SubscriptionsIncludesEmails</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-SubscriptionsClassesEmails.html"><abbr title="\WooCommerce\SubscriptionsClassesEmails">SubscriptionsClassesEmails</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WC.html"><abbr title="\WC">WC</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/WC-Subscriptions.html"><abbr title="\WC\Subscriptions">Subscriptions</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerceSubscriptionsAdminUpgrades.html"><abbr title="\WooCommerceSubscriptionsAdminUpgrades">WooCommerceSubscriptionsAdminUpgrades</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerceSubscriptionsFunctions.html"><abbr title="\WooCommerceSubscriptionsFunctions">WooCommerceSubscriptionsFunctions</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerceSubscriptionsAdminMetaBoxes.html"><abbr title="\WooCommerceSubscriptionsAdminMetaBoxes">WooCommerceSubscriptionsAdminMetaBoxes</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerceSubscriptionsAbstracts.html"><abbr title="\WooCommerceSubscriptionsAbstracts">WooCommerceSubscriptionsAbstracts</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerceSubscriptionsIncludes.html"><abbr title="\WooCommerceSubscriptionsIncludes">WooCommerceSubscriptionsIncludes</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerceClassesEmails.html"><abbr title="\WooCommerceClassesEmails">WooCommerceClassesEmails</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/SkyVergeWooCommerceAPI.html"><abbr title="\SkyVergeWooCommerceAPI">SkyVergeWooCommerceAPI</abbr></a></h3>
                        </section>
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../indices/files.html">Files</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../hooks/hooks.html">Hooks Reference</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
            <li class="phpdocumentor-breadcrumb"><a href="../packages/WooCommerce.html">WooCommerce</a></li>
    </ul>

    <article class="phpdocumentor-element -file">
        <h2 class="phpdocumentor-content__title">class-wcs-my-account-payment-methods.php</h2>

                

        
                    <h3 class="phpdocumentor-elements__header" id="source-code">
                Source code
                <a href="#source-code" class="headerlink"><i class="fas fa-link"></i></a>
            </h3>
            <pre id="source-view" tabindex="-1" class="language-php line-numbers linkable-line-numbers"><code>&lt;?php
/**
 * Manage the process of deleting, adding, assigning default payment tokens associated with automatic subscriptions
 *
 * @package  WooCommerce Subscriptions
 * @category Class
 * @author   Prospress
 * @since    2.2.7
 */
class WCS_My_Account_Payment_Methods {

	/**
	 * Initialize filters and hooks for class.
	 *
	 * @since 2.2.7
	 */
	public static function init() {
		// Only hook class functions if the payment token object exists
		if ( ! class_exists( &#039;WC_Payment_Token&#039; ) ) {
			return;
		}

		add_filter( &#039;woocommerce_payment_methods_list_item&#039;, array( __CLASS__, &#039;flag_subscription_payment_token_deletions&#039; ), 10, 2 );
		add_action( &#039;woocommerce_payment_token_deleted&#039;, array( __CLASS__, &#039;maybe_update_subscriptions_payment_meta&#039; ), 10, 2 );
		add_action( &#039;woocommerce_payment_token_set_default&#039;, array( __CLASS__, &#039;display_default_payment_token_change_notice&#039; ), 10, 2 );
		add_action( &#039;wp&#039;, array( __CLASS__, &#039;update_subscription_tokens&#039; ) );

		add_action( &#039;woocommerce_before_account_payment_methods&#039;, array( __CLASS__, &#039;print_deleting_notices&#039; ) );
		add_action( &#039;wp_enqueue_scripts&#039;, array( __CLASS__, &#039;enqueue_frontend_scripts&#039; ) );
	}

	/**
	 * Add additional query args to delete token URLs which are being used for subscription automatic payments.
	 *
	 * @param  array data about the token including a list of actions which can be triggered by the customer from their my account page
	 * @param  WC_Payment_Token payment token object
	 * @return array payment token data
	 * @since  2.2.7
	 */
	public static function flag_subscription_payment_token_deletions( $payment_token_data, $payment_token ) {

		if ( $payment_token instanceof WC_Payment_Token &amp;&amp; isset( $payment_token_data[&#039;actions&#039;][&#039;delete&#039;][&#039;url&#039;] ) ) {

			if ( 0 &lt; count( WCS_Payment_Tokens::get_subscriptions_from_token( $payment_token ) ) ) {
				if ( WCS_Payment_Tokens::customer_has_alternative_token( $payment_token ) ) {
					$delete_subscription_token_args = array(
						&#039;delete_subscription_token&#039; =&gt; $payment_token-&gt;get_id(),
						&#039;wcs_nonce&#039;                 =&gt; wp_create_nonce( &#039;delete_subscription_token_&#039; . $payment_token-&gt;get_id() ),
					);

					$payment_token_data[&#039;actions&#039;][&#039;delete&#039;][&#039;url&#039;] = add_query_arg( $delete_subscription_token_args, $payment_token_data[&#039;actions&#039;][&#039;delete&#039;][&#039;url&#039;] );
				} else {
					/**
					 * Allow third-party gateways to override whether the token delete button should be removed.
					 *
					 * Some gateways, like Bambora, don&#039;t allow customers to add a new card with the same card number but different expiry or cvv.
					 * This means customers updating their expiring card need to delete the exisitng card first before adding the new one. This
					 * isn&#039;t possible however because we prevent deleting tokens linked to active subscriptions.
					 *
					 * Gateways can use this filter to make their own checks to allow deletion.
					 *
					 * @since 3.1.0
					 *
					 * @param bool Whether the delete button should be shown for tokens linked to a subscription. true - show, false - not shown (default).
					 * @param WC_Payment_Token The payment token in question.
					 */
					if ( isset( $payment_token_data[&#039;actions&#039;][&#039;delete&#039;] ) &amp;&amp; ! apply_filters( &#039;wc_subscriptions_allow_subscription_token_deletion&#039;, false, $payment_token ) ) {
						// Cannot delete a token used for active subscriptions where there is no alternative.
						// Override the delete URL. We&#039;ll display a notice explaining why you cant delete that method instead.
						$payment_token_data[&#039;actions&#039;][&#039;wcs_deletion_error&#039;] = $payment_token_data[&#039;actions&#039;][&#039;delete&#039;];
						unset( $payment_token_data[&#039;actions&#039;][&#039;delete&#039;] );

						// Determine which notice we need to display. The &#039;choose a default&#039; or &#039;add a payment method&#039;.
						// If they have more than 1 alternative method, they need to select a default, otherwise they need to add one.
						if ( count( WCS_Payment_Tokens::get_customer_tokens( $payment_token-&gt;get_user_id(), $payment_token-&gt;get_gateway_id() ) ) &gt; 2 ) {
							$notice_to_display = &#039;choose_default&#039;;
						} else {
							$notice_to_display = &#039;add_method&#039;;
						}

						$payment_token_data[&#039;actions&#039;][&#039;wcs_deletion_error&#039;][&#039;url&#039;] = &quot;#{$notice_to_display}&quot;;
					}
				}
			}
		}

		return $payment_token_data;
	}

	/**
	 * Update subscriptions using a deleted token to use a new token. Subscriptions with the
	 * old token value stored in post meta will be updated using the same meta key to use the
	 * new token value.
	 *
	 * @param int $deleted_token_id The deleted token id.
	 * @param WC_Payment_Token $deleted_token The deleted token object.
	 * @since 2.2.7
	 */
	public static function maybe_update_subscriptions_payment_meta( $deleted_token_id, $deleted_token ) {
		if ( ! isset( $_GET[&#039;delete_subscription_token&#039;] ) || empty( $_GET[&#039;wcs_nonce&#039;] ) || ! wp_verify_nonce( $_GET[&#039;wcs_nonce&#039;], &#039;delete_subscription_token_&#039; . $_GET[&#039;delete_subscription_token&#039;] ) ) {
			return;
		}

		// init payment gateways
		WC()-&gt;payment_gateways();

		$new_token = WCS_Payment_Tokens::get_customers_alternative_token( $deleted_token );

		if ( empty( $new_token ) ) {
			$notice = esc_html__( &#039;The deleted payment method was used for automatic subscription payments, we couldn\&#039;t find an alternative token payment method token to change your subscriptions to.&#039;, &#039;woocommerce-subscriptions&#039; );
			wc_add_notice( $notice, &#039;error&#039; );
			return;
		}

		$subscriptions = WCS_Payment_Tokens::get_subscriptions_from_token( $deleted_token );

		if ( empty( $subscriptions ) ) {
			return;
		}

		foreach ( $subscriptions as $subscription ) {
			if ( empty( $subscription ) ) {
				continue;
			}

			if ( WCS_Payment_Tokens::update_subscription_token( $subscription, $new_token, $deleted_token ) ) {
				// translators: 1: deleted token, 2: new token.
				$subscription-&gt;add_order_note( sprintf( _x( &#039;Payment method meta updated after customer deleted a token from their My Account page. Payment meta changed from %1$s to %2$s&#039;, &#039;used in subscription note&#039;, &#039;woocommerce-subscriptions&#039; ), $deleted_token-&gt;get_token(), $new_token-&gt;get_token() ) );
			}
		}

		// translators: $1: the token/credit card label, 2$-3$: opening and closing strong and link tags
		$notice = sprintf( esc_html__( &#039;The deleted payment method was used for automatic subscription payments. To avoid failed renewal payments in future the subscriptions using this payment method have been updated to use your %1$s. To change the payment method of individual subscriptions go to your %2$sMy Account &gt; Subscriptions%3$s page.&#039;, &#039;woocommerce-subscriptions&#039; ),
			$new_token-&gt;get_display_name(),
			&#039;&lt;a href=&quot;&#039; . esc_url( wc_get_account_endpoint_url( get_option( &#039;woocommerce_myaccount_subscriptions_endpoint&#039;, &#039;subscriptions&#039; ) ) ) . &#039;&quot;&gt;&lt;strong&gt;&#039;,
			&#039;&lt;/strong&gt;&lt;/a&gt;&#039;
		);

		wc_add_notice( $notice, &#039;notice&#039; );
	}

	/**
	 * Get a WC_Payment_Token label. eg Visa ending in 1234
	 *
	 * @deprecated 2.7.2
	 *
	 * @param  WC_Payment_Token payment token object
	 * @return string WC_Payment_Token label
	 * @since  2.2.7
	 */
	public static function get_token_label( $token ) {
		wcs_deprecated_function( __METHOD__, &#039;2.7.2&#039;, &#039;$token-&gt;get_display_name()&#039; );
		return $token-&gt;get_display_name();
	}

	/**
	 * Display a notice when a customer sets a new default token notifying them of what this means for their subscriptions.
	 *
	 * @param int $default_token_id The default token id.
	 * @param WC_Payment_Token $default_token The default token object.
	 * @since 2.3.3
	 */
	public static function display_default_payment_token_change_notice( $default_token_id, $default_token ) {
		global $wp;

		// Only display the change token notice on the My Account &gt; Add Payment Method page.
		if ( ! isset( $wp-&gt;query_vars[&#039;set-default-payment-method&#039;] ) ) {
			return;
		}

		$display_notice  = false;
		$customer_tokens = WCS_Payment_Tokens::get_customer_tokens( $default_token-&gt;get_user_id(), $default_token-&gt;get_gateway_id() );
		unset( $customer_tokens[ $default_token_id ] );

		// Check if there are subscriptions for one of the customer&#039;s other tokens.
		foreach ( $customer_tokens as $token ) {
			if ( count( WCS_Payment_Tokens::get_subscriptions_from_token( $token ) ) &gt; 0 ) {
				$display_notice = true;
				break;
			}
		}

		if ( ! $display_notice ) {
			return;
		}

		// translators: 1: token display name, 2: opening link tag, 4: closing link tag, 3: opening link tag.
		$notice = sprintf( esc_html__( &#039;Would you like to update your subscriptions to use this new payment method - %1$s?%2$sYes%4$s | %3$sNo%4$s&#039;, &#039;woocommerce-subscriptions&#039; ),
			$default_token-&gt;get_display_name(),
			&#039;&lt;/br&gt;&lt;a href=&quot;&#039; . esc_url( add_query_arg( array(
				&#039;update-subscription-tokens&#039; =&gt; &#039;true&#039;,
				&#039;token-id&#039;                   =&gt; $default_token_id,
				&#039;_wcsnonce&#039;                  =&gt; wp_create_nonce( &#039;wcs-update-subscription-tokens&#039; ),
			), wc_get_account_endpoint_url( &#039;payment-methods&#039; ) ) ) . &#039;&quot;&gt;&lt;strong&gt;&#039;,
			&#039;&lt;a href=&quot;&quot;&gt;&lt;strong&gt;&#039;,
			&#039;&lt;/strong&gt;&lt;/a&gt;&#039;
		);

		wc_add_notice( $notice, &#039;notice&#039; );
	}

	/**
	 * Update the customer&#039;s subscription tokens if they opted to from their My Account page.
	 *
	 * @since 2.3.3
	 */
	public static function update_subscription_tokens() {
		if ( ! isset( $_GET[&#039;update-subscription-tokens&#039;], $_GET[&#039;token-id&#039;], $_GET[&#039;_wcsnonce&#039;] ) || ! wp_verify_nonce( $_GET[&#039;_wcsnonce&#039;], &#039;wcs-update-subscription-tokens&#039; ) ) {
			return;
		}

		// init payment gateways
		WC()-&gt;payment_gateways();

		$default_token_id = $_GET[&#039;token-id&#039;];
		$default_token    = WC_Payment_Tokens::get( $default_token_id );

		if ( ! $default_token ) {
			return;
		}

		$tokens = WCS_Payment_Tokens::get_customer_tokens( $default_token-&gt;get_user_id(), $default_token-&gt;get_gateway_id() );
		unset( $tokens[ $default_token_id ] );

		foreach ( $tokens as $old_token ) {
			foreach ( WCS_Payment_Tokens::get_subscriptions_from_token( $old_token ) as $subscription ) {
				if ( ! empty( $subscription ) &amp;&amp; WCS_Payment_Tokens::update_subscription_token( $subscription, $default_token, $old_token ) ) {
					// translators: 1: previous token, 2: new token.
					$subscription-&gt;add_order_note( sprintf( _x( &#039;Payment method meta updated after customer changed their default token and opted to update their subscriptions. Payment meta changed from %1$s to %2$s&#039;, &#039;used in subscription note&#039;, &#039;woocommerce-subscriptions&#039; ), $old_token-&gt;get_token(), $default_token-&gt;get_token() ) );
				}
			}
		}

		wp_redirect( remove_query_arg( array( &#039;update-subscription-tokens&#039;, &#039;token-id&#039;, &#039;_wcsnonce&#039; ) ) );
		exit();
	}

	/**
	 * Enqueues the frontend scripts for the My account &gt; Payment methods page.
	 *
	 * @since 3.1.0
	 */
	public static function enqueue_frontend_scripts() {
		if ( &#039;payment-methods&#039; !== WC()-&gt;query-&gt;get_current_endpoint() ) {
			return;
		}

		$script_params = array(
			&#039;add_method_error&#039;     =&gt; sprintf(
				// translators: %1$s opening strong HTML tag, %2$s closing strong HTML tag.
				__( &#039;That payment method cannot be deleted because it is linked to an automatic subscription. Please %1$sadd a payment method%2$s, before trying again.&#039;, &#039;woocommerce-subscriptions&#039; ),
				&#039;&lt;strong&gt;&#039;,
				&#039;&lt;/strong&gt;&#039;
			),
			&#039;choose_default_error&#039; =&gt; sprintf(
				// translators: %1$s opening strong and em HTML tags, %2$s closing em HTML tag, %3$s closing strong HTML tag.
				__( &#039;That payment method cannot be deleted because it is linked to an automatic subscription. Please choose a %1$sdefault%2$s payment method%3$s, before trying again.&#039;, &#039;woocommerce-subscriptions&#039; ),
				&#039;&lt;strong&gt;&lt;em&gt;&#039;,
				&#039;&lt;/em&gt;&#039;,
				&#039;&lt;/strong&gt;&#039;
			),
		);

		wp_enqueue_script( &#039;wc-subscriptions-payment-methods&#039;, WC_Subscriptions_Core_Plugin::instance()-&gt;get_subscriptions_core_directory_url( &#039;assets/js/frontend/payment-methods.js&#039; ), array( &#039;jquery&#039; ), WC_Subscriptions_Core_Plugin::instance()-&gt;get_plugin_version(), true );
		wp_localize_script( &#039;wc-subscriptions-payment-methods&#039;, &#039;wcs_payment_methods&#039;, $script_params );
	}

	/**
	 * Prints an error notice stub, to be used when a customer attempts to delete a payment token used by a subscription.
	 *
	 * @see self::enqueue_frontend_scripts()                  For the error message content.
	 * @see self::flag_subscription_payment_token_deletions() For the determination of when a token cannot be deleted.
	 *
	 * @since 3.1.0
	 */
	public static function print_deleting_notices() {
		// The notice is hidden on load, and only shown when a token delete request is made.
		echo &#039;&lt;div id=&quot;wcs_delete_token_warning&quot; style=&quot;display: none;&quot;&gt;&#039;;
		wc_print_notice( &#039;&#039;, &#039;error&#039; );
		echo &#039;&lt;/div&gt;&#039;;
	}

	/**
	 * Get subscriptions by a WC_Payment_Token. All automatic subscriptions with the token&#039;s payment method,
	 * customer id and token value stored in post meta will be returned.
	 *
	 * @since  2.2.7
	 * @deprecated 2.5.0
	 */
	public static function get_subscriptions_by_token( $payment_token ) {
		_deprecated_function( __METHOD__, &#039;2.5.0&#039;, &#039;WCS_Payment_Tokens::get_subscriptions_from_token()&#039; );
		return WCS_Payment_Tokens::get_subscriptions_from_token( $payment_token );
	}

	/**
	 * Get a list of customer payment tokens. Caches results to avoid multiple database queries per request
	 *
	 * @since  2.2.7
	 * @deprecated 2.5.0
	 */
	public static function get_customer_tokens( $gateway_id = &#039;&#039;, $customer_id = &#039;&#039; ) {
		_deprecated_function( __METHOD__, &#039;2.5.0&#039;, &#039;WCS_Payment_Tokens::get_customer_tokens()&#039; );
		return WCS_Payment_Tokens::get_customer_tokens( $customer_id, $gateway_id );
	}

	/**
	 * Get the customer&#039;s alternative token.
	 *
	 * @since  2.2.7
	 * @deprecated 2.5.0
	 */
	public static function get_customers_alternative_token( $token ) {
		_deprecated_function( __METHOD__, &#039;2.5.0&#039;, &#039;WCS_Payment_Tokens::get_customers_alternative_token()&#039; );
		return WCS_Payment_Tokens::get_customers_alternative_token( $token );
	}

	/**
	 * Determine if the customer has an alternative token.
	 *
	 * @since  2.2.7
	 * @deprecated 2.5.0
	 */
	public static function customer_has_alternative_token( $token ) {
		_deprecated_function( __METHOD__, &#039;2.5.0&#039;, &#039;WCS_Payment_Tokens::customer_has_alternative_token()&#039; );
		return WCS_Payment_Tokens::customer_has_alternative_token( $token );
	}
}
</code></pre>
            </article>
            </div>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <footer class="phpdocumentor phpdocumentor-footer">
    <div class="phpdocumentor-section">
        <span>WooCommerce Code Reference API documentation generated by <a href="http://www.phpdoc.org/">phpDocumentor</a> on September 21st, 2022 at 05:39 am.</span>
    </div>
</footer>

    <script>
        cssVars({});
    </script>
    <script>
        var searchParams = {
            'searchIndex': '..\/js\/searchIndex.json'
        };
    </script>
    <script src="../js/searchIndex.js?updated=1663738776"></script>
    <script src="../js/search.js?updated=1663738776"></script>
</body>
</html>
